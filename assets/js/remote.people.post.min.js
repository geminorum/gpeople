jQuery(function(c){var d=0;var h=[];var a=0;var b=0;var e=function(k){c("a.gpeople-modal-tab").removeClass("nav-tab-active");c("a.gpeople-modal-tab-"+k).addClass("nav-tab-active");c("div.gpeople-modal-tab-content").hide();c("#gpeople-tab-content-"+k).fadeIn();c("input[focused]","#gpeople-tab-content-"+k).focus()};c("a.gpeople-modal-open").click(function(k){k.preventDefault();c.colorbox({href:"div.gpeople-modal-wrap",title:gPeopleNetwork.remotePost.modal_title,inline:true,innerWidth:gPeopleNetwork.remotePost.modal_innerWidth,maxHeight:gPeopleNetwork.remotePost.modal_maxHeight,innerHeight:"85%",transition:"none"});c("input[focused]","div.gpeople-modal-tab-content[focused]").focus()});c("body").on("click","div.gpeople-modal-tab-content input[selectall]",function(k){c(this).focus().select()});c("a.gpeople-modal-tab").click(function(k){k.preventDefault();e(c(this).data("tab"))});c("body").on("click","a.gpeople-people-delete",function(l){l.preventDefault();var k=c(this).attr("rel");c('tr.gpeople_meta_row[rel="'+k+'"]').remove()});c("#gpeople-tab-content-terms form").submit(function(k){k.preventDefault();d=0;i()});c("#affiliation-term-id").change(function(){d=0;i()});c("body").on("click","a.gpeople-data-list-terms-next",function(k){k.preventDefault();d=c(this).attr("rel");i()});var i=function(){c.ajax({global:false,dataType:"json",url:gPeopleNetwork.api,type:"POST",data:({_ajax_nonce:gPeopleNetwork.remotePost.nonce,action:"gpeople_remote_people",sub:"search_terms",criteria:c("#gpeople-term-search").val(),affiliation:c("#affiliation-term-id").val(),per_page:gPeopleNetwork.remotePost.perpage,paged:d}),beforeSend:function(){c("#gpeople-people-term-messages").html(gPeopleNetwork.remotePost.loading)},success:function(k){if(k.success){h=k.data.list;c("#gpeople-people-term-wrapper").fadeOut("fast",function(){c(this).html(k.data.html).fadeIn("fast")});c("#gpeople-people-term-messages").html(k.data.message)}else{c("#gpeople-people-term-wrapper").fadeOut("fast",function(){c(this).html("")});c("#gpeople-people-term-messages").html(k.data)}}})};c("body").on("click","a.gpeople-data-list-add-term",function(k){k.preventDefault();c(this).prop("disabled",true);g(c(this).attr("rel"),this)});var g=function(k,l){var m=c(l);c.ajax({global:false,dataType:"json",url:gPeopleNetwork.api,type:"POST",data:({_ajax_nonce:gPeopleNetwork.remotePost.nonce,action:"gpeople_remote_people",sub:"insert_term",rel:k}),beforeSend:function(){c("#gpeople-people-saved-messages").html("");c(m).html(gPeopleNetwork.remotePost.spinner)},success:function(n){if(n.success){c(m).html(gPeopleNetwork.remotePost.added);c("#gpeople-meta-modal-saved-form tbody#the-list").append(n.data.row);c("#gpeople-meta-modal-saved-form tbody#the-list tr.no-items").hide();c("a.gpeople-modal-tab-saved").trigger("click");c("#gpeople-people-saved-messages").html(n.data.message)}else{c(m).html(gPeopleNetwork.remotePost.error);c("a.gpeople-modal-tab-saved").trigger("click");c("#gpeople-people-saved-messages").html(n.data)}}})};c("#gpeople-tab-content-profiles form").submit(function(k){k.preventDefault();a=0;f()});c("#gpeople-profile-groups").change(function(){a=0;f()});c("body").on("click","a.gpeople-data-list-profiles-next",function(k){k.preventDefault();a=c(this).attr("rel");f()});var f=function(){c.ajax({global:false,dataType:"json",url:gPeopleNetwork.api,type:"POST",data:({_ajax_nonce:gPeopleNetwork.remotePost.nonce,action:"gpeople_remote_people",sub:"search_profiles",criteria:c("#gpeople-profile-search").val(),group:c("#gpeople-profile-groups").val(),per_page:gPeopleNetwork.remotePost.perpage,paged:a}),beforeSend:function(){c("#gpeople-people-profile-messages").html(gPeopleNetwork.remotePost.loading);c("#gpeople-people-profile-wrapper").fadeOut("fast",function(){c(this).html("")})},success:function(k){if(k.success){h=k.data.list;c("#gpeople-people-profile-messages").html(k.data.message);c("#gpeople-people-profile-wrapper").fadeOut("fast",function(){c(this).html(k.data.html).fadeIn("fast")})}else{c("#gpeople-people-profile-messages").html(k.data)}}})};c("#gpeople-tab-content-users form").submit(function(k){k.preventDefault();b=0;j()});c("#gpeople-user-roles").change(function(){b=0;j()});c("body").on("click","a.gpeople-data-list-users-next",function(k){k.preventDefault();b=c(this).attr("rel");j()});var j=function(){c.ajax({global:false,dataType:"json",url:gPeopleNetwork.api,type:"POST",data:({_ajax_nonce:gPeopleNetwork.remotePost.nonce,action:"gpeople_remote_people",sub:"search_users",criteria:c("#gpeople-user-search").val(),roles:c("#gpeople-user-roles").val(),per_page:gPeopleNetwork.remotePost.perpage,paged:b}),beforeSend:function(){c("#gpeople-people-user-messages").html(gPeopleNetwork.remotePost.loading)},success:function(k){if(k.success){h=k.data.list;c("#gpeople-people-user-wrapper").html(k.data.html);c("#gpeople-people-user-messages").html(k.data.message)}else{c("#gpeople-people-user-messages").html(k.data)}}})};c("#gpeople-tab-content-manual form").submit(function(k){k.preventDefault();c.ajax({global:false,dataType:"json",url:gPeopleNetwork.api,type:"POST",data:({_ajax_nonce:gPeopleNetwork.remotePost.nonce,action:"gpeople_remote_people",sub:"insert_manual",term:c(this).serializeArray()}),beforeSend:function(){c("#gpeople-people-saved-messages").html("");c("#gpeople-people-manual-messages").html("")},success:function(l){if(l.success){c("#gpeople-meta-modal-saved-form tbody#the-list").append(l.data.row);c("#gpeople-meta-modal-saved-form tbody#the-list tr.no-items").hide();c("#gpeople-tab-content-manual form").trigger("reset");c("a.gpeople-modal-tab-saved").trigger("click");c("#gpeople-people-saved-messages").html(l.data.message)}else{c("#gpeople-people-manual-messages").html(l.data)}}})});c("#gpeople-meta-modal-saved-form").submit(function(){c(this).ajaxSubmit({url:gPeopleNetwork.api,dataType:"json",data:({_ajax_nonce:gPeopleNetwork.remotePost.nonce,action:"gpeople_remote_people",sub:"store_meta"}),beforeSubmit:function(){c("#gpeople-people-saved-messages").html("");c("gpeople_meta_save_close").val(gPeopleNetwork.remotePost.spinner)},success:function(k){if(k.success){c("#gpeople_saved_byline").html(k.data).fadeIn("fast");c.colorbox.close()}else{c("#gpeople-people-saved-messages").html(k.data)}}});return false})});